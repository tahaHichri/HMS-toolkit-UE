<?xml version="1.0" encoding="utf-8"?>
<!--
! Created By Taha HICHRI
Copyright (c) Taha HICHRI <hishri.taha@gmail.com> - 2020
-->
<root xmlns:android="http://schemas.android.com/apk/res/android">
	<init>
		<log text="HMS Toolkit inject" />
	</init>
	<proguardAdditions>
		<insert>
		</insert>
	</proguardAdditions>
	<baseBuildGradleAdditions>
		<insert>
			allprojects {
			repositories {
			google()
			jcenter()
			
			maven {url 'http://developer.huawei.com/repo/'}
			}
			}
		</insert>
	</baseBuildGradleAdditions>
	<buildscriptGradleAdditions>
		<insert>
			repositories {
			// Huawei repository
			maven { url 'https://developer.huawei.com/repo/' }
			}
			
			
			dependencies {
			// Huawei AG connect
			classpath 'com.huawei.agconnect:agcp:1.2.1.301'
			
			// analytics
			classpath 'com.huawei.hms.plugin:analytics:5.0.1.300'
			}
		</insert>
	</buildscriptGradleAdditions>
	<prebuildCopies>
		<copyFile src="$S(PluginDir)/agconnect-services.json" dst="$S(BuildDir)/gradle/app/agconnect-services.json" />
	</prebuildCopies>
	<buildGradleAdditions>
		<insert>
			dependencies {
			/**
			* HMS dependencies
			*/
			
			implementation 'com.huawei.hms:hwid:4.0.0.300'          // Core
			implementation 'com.huawei.hms:hianalytics:5.0.1.301'   // analytics
			}
			
			apply plugin: 'com.huawei.agconnect'
			apply plugin: 'com.huawei.hms.plugin.analytics'
		</insert>
	</buildGradleAdditions>
	<prebuildCopies>
	</prebuildCopies>
	<gameActivityImportAdditions>
		<insert>
			<!-- Inject imports here -->
			import java.util.Collections;
			import java.util.ArrayList;
			import java.util.List;
			
			import android.content.Intent;
			import android.os.Bundle;
			import android.util.Log;
			
			import com.huawei.hmf.tasks.Task;
			import com.huawei.hms.common.ApiException;
			import com.huawei.hms.support.api.entity.auth.Scope;
			
			
			import com.huawei.hms.analytics.HiAnalytics;
			import com.huawei.hms.analytics.HiAnalyticsInstance;
			import com.huawei.hms.analytics.HiAnalyticsTools;
			import static com.huawei.hms.analytics.type.HAEventType.*;
			import static com.huawei.hms.analytics.type.HAParamType.*;
		</insert>
	</gameActivityImportAdditions>
	<androidManifestUpdates>
	</androidManifestUpdates>
	<!-- ####################### Activity/App lifecycle callbacks ###################### -->
	<!--
	# optional additions to GameActivity onCreate in GameActivity.java
	# There are a few checks and final value initializations, preferably I will add them here
	-->
	<gameActivityOnCreateAdditions>
		<insert>
			HiAnalyticsTools.enableLog();
			// Generate the Analytics Instance
			instance = HiAnalytics.getInstance(this);
			
			instance.setUserProfile("User referral", "Taa");
			
			Bundle bundle = new Bundle();
			bundle.putLong(SCORE, 666);
			
			// Report a predefined Event
			instance.onEvent(SUBMITSCORE, bundle);
		</insert>
	</gameActivityOnCreateAdditions>
	<!-- optional additions to GameActivity onDestroy in GameActivity.java -->
	<gameActivityOnDestroyAdditions>
		<insert>
		</insert>
	</gameActivityOnDestroyAdditions>
	<!-- optional additions to GameActivity onStart in GameActivity.java -->
	<gameActivityOnStartAdditions>
	</gameActivityOnStartAdditions>
	<!-- optional additions to GameActivity onStop in GameActivity.java -->
	<gameActivityOnStopAdditions>
		<insert>
		</insert>
	</gameActivityOnStopAdditions>
	<!-- optional additions to GameActivity onPause in GameActivity.java -->
	<gameActivityOnPauseAdditions>
		<insert>
		</insert>
	</gameActivityOnPauseAdditions>
	<!-- optional additions to GameActivity onResume in GameActivity.java -->
	<gameActivityOnResumeAdditions>
	</gameActivityOnResumeAdditions>
	<!-- # Methods, inner classes, and other the other additions -->
	<gameActivityClassAdditions>
		<insert>
			// analytics
			HiAnalyticsInstance instance;
		</insert>
	</gameActivityClassAdditions>
	<gameActivityOnActivityResultAdditions>
		<insert>
		</insert>
	</gameActivityOnActivityResultAdditions>
</root>
